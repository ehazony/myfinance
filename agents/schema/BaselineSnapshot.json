{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$id": "BaselineSnapshot",
    "type": "object",
    "required": ["snapshot_id", "user_id", "created_at", "currency", "accounts", "assets", "liabilities"],
    "properties": {
      "snapshot_id": { "type": "string", "format": "uuid" },
      "user_id":     { "type": "string", "format": "uuid" },
      "created_at":  { "type": "string", "format": "date-time" },
      "currency":    { "type": "string", "pattern": "^[A-Z]{3}$" },
  
      "accounts": {
        "type": "array",
        "items": { "$ref": "Account" }
      },
      "assets": {
        "type": "array",
        "items": { "$ref": "Asset" }
      },
      "liabilities": {
        "type": "array",
        "items": { "$ref": "Liability" }
      },
  
      "monthly_income":  { "type": "number" },
      "monthly_expenses":{ "type": "number" },
      "notes":           { "type": "string" },
      "missing_info": {
        "type": "array",
        "items": { "type": "string" }
      }
    },
  
    "definitions": {
      "Account": {
        "type": "object",
        "required": ["account_id","institution","account_type","balance","currency"],
        "properties": {
          "account_id":  { "type": "string", "format": "uuid" },
          "institution": { "type": "string" },
          "account_type":{ "type": "string", "enum": ["checking","savings","brokerage","credit_card","loan","pension","other"] },
          "balance":     { "type": "number" },
          "currency":    { "type": "string", "pattern": "^[A-Z]{3}$" }
        }
      },
  
      "Asset": {
        "type": "object",
        "required": ["asset_id","name","asset_type","value","currency"],
        "properties": {
          "asset_id":  { "type": "string", "format": "uuid" },
          "name":      { "type": "string" },
          "asset_type":{ "type": "string","enum": ["property","vehicle","equity","bond","cash","alternatives","other"] },
          "value":     { "type": "number" },
          "currency":  { "type": "string", "pattern": "^[A-Z]{3}$" },
          "notes":     { "type": "string" }
        }
      },
  
      "Liability": {
        "type": "object",
        "required": ["liability_id","name","liability_type","balance","interest_rate","currency"],
        "properties": {
          "liability_id": { "type": "string", "format": "uuid" },
          "name":         { "type": "string" },
          "liability_type":{ "type": "string","enum": ["credit_card","personal_loan","mortgage","student_loan","tax","other"] },
          "balance":      { "type": "number" },
          "interest_rate":{ "type": "number" },
          "min_payment":  { "type": "number" },
          "currency":     { "type": "string", "pattern": "^[A-Z]{3}$" },
          "due_date":     { "type": "string","format":"date" }
        }
      }
    }
  }
