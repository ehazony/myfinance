{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$id": "DebtStrategy",
    "type": "object",
    "required": ["strategy_id","snapshot_id","payoff_method","debts"],
    "properties": {
      "strategy_id": {"type":"string","format":"uuid"},
      "snapshot_id": {"type":"string","format":"uuid"},
      "payoff_method":{"type":"string","enum":["avalanche","snowball"]},
  
      "interest_saved_estimate":{"type":"number"},
      "debts":{
        "type":"array",
        "items":{"$ref":"Debt"}
      },
      "payoff_schedule":{
        "type":"array",
        "items":{"$ref":"ScheduleEntry"}
      }
    },
  
    "definitions":{
      "Debt":{
        "type":"object",
        "required":["liability_id","balance","interest_rate","min_payment","suggested_payment"],
        "properties":{
          "liability_id":{"type":"string","format":"uuid"},
          "balance":{"type":"number"},
          "interest_rate":{"type":"number"},
          "min_payment":{"type":"number"},
          "suggested_payment":{"type":"number"},
          "payoff_order":{"type":"integer"},
          "expected_payoff_date":{"type":"string","format":"date"}
        }
      },
      "ScheduleEntry":{
        "type":"object",
        "required":["date","total_payment","balance_remaining"],
        "properties":{
          "date":{"type":"string","format":"date"},
          "total_payment":{"type":"number"},
          "principal_paid":{"type":"number"},
          "interest_paid":{"type":"number"},
          "balance_remaining":{"type":"number"}
        }
      }
    }
  }